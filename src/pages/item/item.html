<!--
  Generated template for the Item page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title text-center>Add new Item</ion-title>
    <ion-buttons end>
    	<button ion-button icon-only (click)="closeModal()"><ion-icon name="close"></ion-icon></button>
    </ion-buttons>
  </ion-navbar>
  <ion-searchbar placeholder="Search Item"
	  [(ngModel)]="itemSearch"
	  [showCancelButton]="shouldShowCancel"
	  (ionInput)="getItems($event)"
	  (ionCancel)="onCancel($event)">
  </ion-searchbar>


</ion-header>


<ion-content >
	<br>
	<ion-list inset>
	    <ion-item *ngFor="let item of filterItems" (click)="onItemSelected(item)">
	      <h4>{{ item.code }} : {{item.description}}</h4>
	    </ion-item>
  	</ion-list>
  	<div *ngIf="itemSelected" padding>	
	    <h3 color="primary">{{itemSelected.code}}</h3>	    
	    <p>{{itemSelected.description}}</p>
	    <form [formGroup]="itemsForm" (ngSubmit)="submitForm(itemsForm.value)">
		        <ion-item>
		            <ion-label floating>Quantity...</ion-label>
		            <ion-input type="text" value="" [formControl]="itemsForm.controls['quantity']" [ngClass]="{'error-border':!itemsForm.controls['quantity'].valid}"></ion-input>          
		        </ion-item>
		        <br/>
		        <div class="error-box" *ngIf="itemsForm.controls['quantity'].hasError('required') && itemsForm.controls['quantity'].touched">* Quantity is required!</div>
		        
		        <div class="error-box" *ngIf="itemsForm.controls['quantity'].hasError('greaterThan0') && itemsForm.controls['quantity'].touched">* Quantity must be greater than 0!</div>
				
				<div class="error-box" *ngIf="itemsForm.controls['quantity'].hasError('isNumber') && itemsForm.controls['quantity'].touched">* Quantity must be a number!!</div>
		       <br/>
				
				<button type="submit" ion-button color="light" full [disabled]="!itemsForm.valid">
					<ion-icon name="save"></ion-icon>
					Save
				</button>
		</form>
	</div>
	 
</ion-content>
